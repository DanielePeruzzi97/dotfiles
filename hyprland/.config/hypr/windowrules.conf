# Window rules for specific applications

##############################
### GENERAL / SYSTEM FIXES ###
##############################
# Ignore maximize requests from apps
windowrule {
    name = suppress-maximize
    match:class = .*
    suppress_event = maximize
}

# Fix XWayland dragging issues
windowrule {
    name = xwayland-drag-fix
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false
    no_focus = true
}

##############################
### XWAYLANDVIDEOBRIDGE ###
##############################
# Required for Discord/WebRTC screen sharing on Wayland
windowrule {
    name = xwaylandvideobridge
    match:class = ^(xwaylandvideobridge)$
    opacity = 0.0 override 0.0 override
    animation = none
    no_initial_focus = true
    size = 1 1
    decorate = false
}

############################################
### WORKSPACE ASSIGNMENTS (Named/Purpose) ###
############################################
# 1 = DEV   - Terminals, editors (no rule needed - default)
# 2 = WEB   - Browsers
# 3 = CHAT  - Communication apps
# 4 = MEDIA - Music, videos
# 5 = FILES - File managers

# WEB → Workspace 2
windowrule {
    name = browsers-ws2
    match:class = ^(firefox|chromium|google-chrome|brave-browser)$
    workspace = 2
}

# CHAT → Workspace 3
windowrule {
    name = chat-ws3
    match:class = ^(discord|vesktop|webcord|Slack|telegram-desktop|teams)$
    workspace = 3
}

windowrule {
    name = chat-opacity
    match:class = ^(discord|vesktop|webcord)$
    opacity = 0.95 0.90
}

# MEDIA → Workspace 4
windowrule {
    name = spotify-ws4
    match:class = ^(Spotify|spotify)$
    workspace = 4
}

windowrule {
    name = media-ws4
    match:class = ^(mpv|vlc|celluloid)$
    workspace = 4
}

windowrule {
    name = spotify-opacity
    match:class = ^(Spotify|spotify)$
    opacity = 0.95 0.90
}

# FILES → Workspace 5
windowrule {
    name = files-ws5
    match:class = ^(org.kde.dolphin|nautilus|thunar|pcmanfm|nemo)$
    workspace = 5
}

###############
### GAMING ###
###############
# Steam - Float popups, main window normal
windowrule {
    name = steam-popups-float
    match:class = ^(steam)$
    match:title = ^(Friends List|Steam Settings|Game Properties)
    float = on
    center = on
}

windowrule {
    name = steam-friends-size
    match:class = ^(steam)$
    match:title = ^(Friends List)$
    size = 400 600
}

# Steam games - Fullscreen with tearing for performance
windowrule {
    name = steam-games
    match:class = ^(steam_app_.*)$
    fullscreen = on
    immediate = on
}

# Lutris games
windowrule {
    name = lutris-games
    match:class = ^(lutris)$
    match:title = negative:^Lutris
    fullscreen = on
    immediate = on
}

###############
### BROWSER ###
###############
# Firefox Picture-in-Picture
windowrule {
    name = firefox-pip
    match:class = ^(firefox)$
    match:title = ^(Picture-in-Picture)$
    float = on
    pin = on
    size = 640 360
    move = 100%-660 50
    opacity = 1.0 override
}

################
### HARDWARE ###
################
# ZSA Keymapp (keyboard configurator)
windowrule {
    name = keymapp
    match:class = ^(keymapp)$
    float = on
    center = on
    size = 900 700
}

#######################
### SYSTEM UTILITIES ###
#######################
# Bluetooth manager
windowrule {
    name = blueman
    match:class = ^(blueman-manager)$
    float = on
    center = on
    size = 700 500
}

# Network manager editor
windowrule {
    name = nm-editor
    match:class = ^(nm-connection-editor)$
    float = on
    center = on
    size = 800 600
}

# PulseAudio volume control
windowrule {
    name = pavucontrol
    match:class = ^(pavucontrol)$
    float = on
    center = on
    size = 800 600
}

# System Monitor / htop
windowrule {
    name = system-monitor
    match:class = ^(gnome-system-monitor|htop)$
    float = on
    center = on
    size = 900 700
}

####################
### FILE DIALOGS ###
####################
# Float all file picker dialogs
windowrule {
    name = file-dialogs
    match:title = ^(Open File|Save File|Open Folder|Save As|Select a File|Select Files)
    float = on
    center = on
}

windowrule {
    name = file-operations
    match:title = ^(Confirm to replace files|File Operation Progress)
    float = on
}

# KDE file dialogs
windowrule {
    name = kde-file-ops
    match:class = ^(org.kde.dolphin)$
    match:title = ^(Copying|Moving|Deleting)
    float = on
}

windowrule {
    name = kde-portal
    match:class = ^(org.freedesktop.impl.portal.desktop.kde)$
    float = on
}

#################
### TERMINALS ###
#################
# Terminal opacity (optional - adjust as needed)
# windowrule {
#     name = terminal-opacity
#     match:class = ^(ghostty|kitty|Alacritty)$
#     opacity = 0.95 0.90
# }

##################
### EDITORS ###
##################
# VS Code / Codium on workspace 2 (optional)
# windowrule {
#     name = vscode-ws2
#     match:class = ^(code|codium|Code)$
#     workspace = 2
# }
